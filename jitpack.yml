jdk:
  - openjdk17
before_install:
  # Install Rust
  - curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
  - source $HOME/.cargo/env
  - rustup default 1.84.1
  - rustup target add aarch64-linux-android armv7-linux-androideabi x86_64-linux-android
  # Install uniffi crate
  - cd tapyrus-wallet-ffi
  - cargo build --bin uniffi-bindgen
  - cargo install --path . --bin uniffi-bindgen
  - cd ..
  # Android NDK
  - export ANDROID_NDK_ROOT=$ANDROID_NDK_HOME
  # build
  - cd TapyrusWalletAndroid
  - chmod +x ./scripts/build-android.sh
  - ./scripts/build-android.sh
